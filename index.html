<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">



<title>Spectrographie(s) v1</title>

<link rel="stylesheet" href="src/bootstrap-3.3.7\dist\css\bootstrap.css">
<link href="src/style/navbar-fixed-side.css" rel="stylesheet" />
<link href="src/modal_sidebar.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.10/select2-bootstrap.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.5/MarkerCluster.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.5/MarkerCluster.Default.css" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" rel="stylesheet">
<link rel="stylesheet" href="css/leaflet.extra-markers.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/leaflet.extra-markers.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.5/leaflet.markercluster-src.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.5/leaflet.markercluster.js"></script>


<style type="text/css">
  




html, body {
  height: 100%;
  width: 100%;
  overflow: hidden;
  background-color: grey;
}


.navbar .navbar-header {

background-color: rgba(255, 255, 255,1);

}

#map{

 position:absolute;
 width:85%;
 left: 15%;
 height:100%;
 z-index: 0;
  }


#togglebtn{

left:5%;
background-color: rgba(255, 255, 255,0);
display:inline-block;

}

#toggle-bar{
background-color: white;
float: left;
bottom:0;
}




#testContainer{
  color: black;
  margin-bottom: 0;
  opacity: 1;
}

#inputCont{z-index: 2;
position: absolute;}


#slider-thumbs{
z-index: 20;
}

.leaflet-popup-content-wrapper,.leaflet-popup-content
 {
   -webkit-border-radius: 0 !important;
   -moz-border-radius: 0 !important;
    border-radius: 0 !important;
    background-color: rgba(255,255,255,0.8)
    

 }

#myImg {
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
}

#myImg:hover {opacity: 0.7;}

/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 18%;
    top: 18%;
    width: 66%; /* Full width */
    height: 66%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
}

/* Modal Content (image) */
.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 500px;
}

/* Caption of Modal Image */
#caption {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
    text-align: center;
    color: #ccc;
    padding: 10px 0;
    height: 150px;
}

/* Add Animation */
.modal-content, #caption {    
    -webkit-animation-name: zoom;
    -webkit-animation-duration: 0.6s;
    animation-name: zoom;
    animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
    from {-webkit-transform:scale(0)} 
    to {-webkit-transform:scale(1)}
}

@keyframes zoom {
    from {transform:scale(0)} 
    to {transform:scale(1)}
}

/* The Close Button */
.close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
}

.close:hover,
.close:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* 100% Image Width on Smaller Screens */
@media only screen and (max-width: 700px){
    .modal-content {
        width: 100%;
    }
}


.navbar-header {
  float: none;
  background-color: white;
}
.navbar-toggle {
  display: inline-block;
}
.navbar-collapse.collapse {
  display: none!important;
}
.navbar-nav {
  float: none!important;
}
.navbar-nav>li {
  float: none;
}
.navbar-collapse.collapse.in{
  display:block !important;
}




.navbar-toggle .icon-bar {
  display: block;
  width: 33px;
  height: 4px;
  background-color: rgb(238,51,255);
  border-radius: 1px;
  margin-top: 33%;
}




/* Extra Large desktops and laptops */
@media (min-width: 1600px) and (max-width: 1980px) {

#togglebtn{
left:5%;
  }


}

/* Large desktops and laptops */
@media (min-width: 1200px) and (max-width: 1599px) {

#togglebtn{
left:5%;
  }

}

/* Landscape tablets and medium desktops */
@media (min-width: 992px) and (max-width: 1199px) {

#togglebtn{
left:5%;
  }

}

/* Portrait tablets and small desktops */
@media (min-width: 768px) and (max-width: 991px) {




#togglebtn{
left:5%;
  }

}

/* Landscape phones and portrait tablets */
@media (max-width: 767px) {

#togglebtn{
left:5%;
  }

}

/* Portrait phones and smaller */
@media (max-width: 480px) {


#togglebtn{
left:5%;
  }
}


.well{
  margin:15px;
}



#navBarLeft{
  margin:auto;
  height: 100%;
  
  width: 15%;
  top: 15%;
  left: 0;
  bottom: 0;
}


#audioBox{

  position: absolute;
  z-index: 10;
  left: 20%;
  height: 50px;
  width: 100px;
  bottom: 5%;


}

#photoBox{

  position: absolute;
  z-index: 10;
  left: 30%;
  height: 50px;
  width: 100px;
  bottom: 5%;

}





</style>







<div id="menu" class="container-fluid">

    <div  class="col-sm-3">
  
      <nav class="navbar navbar-default navbar-fixed-side" id="navBarLeft">
           
           <!-- Header -->

              <div class="navbar-header">
                <a class="navbar-brand" href=""><h3> Navigation </h3></a>
              </div>

                <!-- Select lists -->
     <div class="container-fluid">           
      <div class="well">
        <div class="form-group">
                  <label for="single" class="control-label">Participant</label>
                  <select id="single" class="form-control select2-single">
                    <option></option>
                    <optgroup label="Alaskan/Hawaiian Time Zone">
                      <option value="AK">Alaska</option>
                      <option value="HI" disabled="disabled">Hawaii</option>
                   </select>
        </div>
      </div>

      <div class="well">
        <div class="form-group">
                  <label for="single" class="control-label">Type</label>
                  <select id="single" class="form-control select2-single">
                    <option></option>
                    <optgroup label="Alaskan/Hawaiian Time Zone">
                      <option value="AK">Alaska</option>
                      <option value="HI" disabled="disabled">Hawaii</option>
                   </select>
        </div>
      </div>


      <div class="well">
        <div class="form-group">
                  <label for="single" class="control-label">Genre</label>
                  <select id="single" class="form-control select2-single">
                    <option></option>
                    <optgroup label="Alaskan/Hawaiian Time Zone">
                      <option value="AK">Alaska</option>
                      <option value="HI" disabled="disabled">Hawaii</option>
                   </select>
        </div>
      </div>

      <div class="well">
        <div class="form-group">
                  <label for="single" class="control-label">Média</label>
                  <select id="single" class="form-control select2-single">
                    <option></option>
                    <optgroup label="Alaskan/Hawaiian Time Zone">
                      <option value="AK">Alaska</option>
                      <option value="HI" disabled="disabled">Hawaii</option>
                   </select>
        </div>
      </div>
     </div>  

     </nav>

     </div>

    </div>





<div class="col-sm-10" id="map"> </div>



<nav class="navbar navbar-fixed-top" >

  <div class="navbar-header" id="navBarTop">

  <div id=toggle-bar>
    <button type="button" id="togglebtn" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>

<div id='title'>
  <h1>
    Spectrographie(s) du territoire
  </h1>
<div>



  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
      <div class="well">
         <h4> Ceci est un titre</h4>
         <h5> Ceci est un sous-titre</h5>
         <p> Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe,Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, Ceci est un paragraphe, </p>

         <h4> Ceci est un titre</h4>
         <h5> Ceci est un sous-titre</h5>

        <p> Ceci est un second paragraphe,Ceci est un second paragraphe
        Ceci est un second paragrapheCeci est un second paragrapheCeci est un second paragrapheCeci est un second paragrapheCeci est un second paragrapheCeci est un second paragrapheCeci est un second paragrapheCeci est un second paragraphe</p>


      </div>
    </ul>


    <!--USERNAME  could be used for linking to the Fulcrum Admin Page 

    <div class="navbar-header navbar-right">
      <p class="navbar-text">
      <a href="#" class="navbar-link">Username</a>
      </p>
    </div>

    -->

</nav>


<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="img01">
  <div id="caption"></div>
</div>      


         <div class=container>

         <div id ="audioBox" class="well well-sm">  AUDIO </div> 

      
         
           <div id ="photoBox" class="well well-sm">  PHOTOS </div> 

         </div> 
      


<script>

/*** Draggable ***/
  /*{ containment: "#containment-wrapper", scroll: false }*/ 

/*$( function() {
    $( "#typeInput" ).draggable({ scroll: false });
  } );*/


/*** Click outside collapse ***/

$(document).click(function(e) {
    if (!$(e.target).is('a')) {
        $('.collapse').collapse('hide');        
    }
});


var map = L.map('map', {
          zoomControl: false}).setView([45.5314, -73.6750], 9);


var baseLayer1 = L.tileLayer('https://api.mapbox.com/styles/v1/clementg123/cj66rikp37hgc2rltvyo7eepa/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2xlbWVudGcxMjMiLCJhIjoiY2o2M3ZhODh3MWxwNDJxbnJnaGZxcWNoMiJ9.YroDniTcealGFJgHtQ2hDg').addTo(map);


var markerCluster = L.markerClusterGroup({
  spiderfyOnMaxZoom: true,
  showCoverageOnHover: false,
  zoomToBoundsOnClick: true,
  removeOutsideVisibleBounds: true,
  maxClusterRadius: 50

});
var group = L.layerGroup();
var photo_url ="https://web.fulcrumapp.com/shares/3a4bbd0435c58166/photos/view?photos=03f467ac-5c96-4483-836b-4615e4ef8896"
var thumbnailphoto = "https://fulcrumapp.s3.amazonaws.com/photos/thumb_73c7ab63-d930-40d0-8d95-3cb6f0da6bb4-71243998-1886-49ce-86e9-d1b0eb48f328.png?AWSAccessKeyId=AKIAINLD3OFR6WK7JO3Q&Signature=BrTEemOGspEKfYuTr56kQ4yvUf4%3D&Expires=1505566588" 

function getSpectro() {
$.when(
 $.getJSON('https://web.fulcrumapp.com/shares/3a4bbd0435c58166.geojson')).done(function(filterStories) {

  function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++) {
     color += letters[Math.round(Math.random() * 15.66)];
    }
    return color;
   };

   _setColor = {
    radius: 8,
    fillColor: get_random_color(),
    color: '#ffffff',
    weight: 1,
    opacity: 0.6,
    fillOpacity: 0.8

  }

    _marker = filterStories.features;


   // _status =filterStories.features.properties.status

//    console.log(_status)

 //   var test = for (i = 0; i<feature.properties.status;i++){

    _filteredMarker = L.geoJSON(_marker, {

  /*style: function (feature) {
          if(feature.properties.type === 'Rebut'){
            return {color: 'red'};
          } 
         
          else if(feature.properties.type === 'Curiosité'){
            return { color: 'orange'};
             }
            else if(feature.properties.type === 'Objet perdu'){
            return { color: 'purple'};
        }
            else if(feature.properties.type === 'Autre'){
            return { color: 'white'};
            }
        else {
            return { color: 'grey'};
          }
    },*/

   /* pointToLayer: function(feature, latlng) {
     return L.circleMarker(latlng,   {radius: 8, fillOpacity: 0.5, color: "purple",  weight: 1,  opacity: 0.66
     }
      )
    },*/

    onEachFeature: function(feature, layer) {
     layer.bindPopup(

      //'<img  src="'+feature.properties.photos_url.replace('view?photos=','')+'" width="100" height=auto</img>')

     '<div id="test123"><a href="#" class="speciallink"><h2>'
       +feature.properties.titre
       +'</h2></a><img id="myImg" alt="'
       +feature.properties.description+
       '" src="'
       +feature.properties.photos_url.replace('view?photos=','')
       +'" width="100" height=auto ></img><h4>'
       +feature.properties.date
       +' @ '
       +feature.properties.time
       +'</h4><p>'
       +feature.properties.pseudo+
     '</p><p>'
       +feature.properties.genre+
     '</p><p>'   
       +feature.properties.relation_au_lieu_appartenance.substring(0,140)+
    ' ... </p><div>'+
     '<iframe src="https://www.facebook.com/plugins/share_button.php?href='
       + feature.properties.photos_url.replace('view?photos=','')
       +'&layout=button&size=small&mobile_iframe=false&width=59&height=20&appId" width="59" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>'
       +'  '+
   '<iframe id="tweet-button" allowtransparency="true" frameborder="0" scrolling="no"  src="http://platform.twitter.com/widgets/tweet_button.html?url='
       +feature.properties.photos_url.replace('view?photos=','')+
       '&amp;count=horizontal"   style="width:110px; height:20px;"></iframe>')

         /*** ON HOVER ***/
         /* layer.on('mouseover', function (e) {
                this.openPopup();
            });
          layer.on('mouseout', function (e) {
                this.closePopup();
            });*/


    },
});  //end _filtermarker


/*** Toggle Layers ***/

/*function toggleLayer() {
 var baseMaps = {
  'Carto Dark  ': baseLayer1,
  'Carto Light  ': baseLayer2,
  'MapBox': baseLayer3,
  'Thunderforest_SpinalMap': Thunderforest_SpinalMap,
  'Thunderforest_SpinalMap': Thunderforest_SpinalMap,
  'Stamen_Toner ': Stamen_Toner,
  'Stamen_Terrain ': Stamen_Terrain,
  'Stamen_TonerHybrid': Stamen_TonerHybrid,
  'OpenTopoMap':OpenTopoMap,
  'Esri_WorldImagery':Esri_WorldImagery


 };

 L.control.layers(null,baseMaps,{position:"bottomright"}).addTo(map);
}
toggleLayer();
*/

markerCluster.addLayer(_filteredMarker)
group.addLayer(_filteredMarker)
map.addLayer(markerCluster)  
map.fitBounds(_filteredMarker.getBounds())

   });
}


getSpectro()

function getColor(d) {
    return d === "Rebut" ? 'red' :
           d ==="Curiosité"  ? 'orange' :
           d === "Objet perdu"  ? 'purple' :
           d === "Autre"  ? 'white' :
                      '#FFEDA0';
;
}
 
/*var legend = L.control({position: 'bottomleft'});

legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend');

categories = ['Rebut','Curiosité','Objet perdu','Autre'];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i < categories.length; i++) {
         div.innerHTML +=
         '<i class="circle" style="background:' + getColor(categories[i]) + '"></i> ' +
          (categories[i] ? categories[i] + '<br>' : '+');
    }

    return div;
};

legend.addTo(map);
*/

map.on('popupopen', function () {
      // Get the modal
var modal = document.getElementById('myModal');

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById('myImg');
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");

    img.onclick = function(){
    map.closePopup();
    modal.style.display = "block";
    modalImg.src = this.src;
    captionText.innerHTML = this.alt;
};

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() { 
    modal.style.display = "none";
}


$('modalImg').on('click', function() {
        $('.modal').hide();
      });

    });

 






  </script>  

 
 
  
</head>


 

</body>
</html>


   </body>
</html>
